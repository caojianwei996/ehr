# 接口文档

***

### 一. 系统:

#### 权限控制:

你可以从请求头中取到token

```
Authorization: Token jwt.token.here 
```

## 员工登录

```
POST /api/users/login
```

```json
{
  "data":{
    "username": "number or email",
    "password": "jakejake"
  }
}
```

No authentication required, returns a User

Required fields: `username` `password`

Throws:  `用户不存在` or `密码错误`

## 重置密码

```json
POST /api/users/reset

{
  "data":{
    "email": "1@163.com"
  }
}
```

No authentication required 

Required fields: `email`

Throws: `用户不存在` 

## 获取菜单

    GET /api/menus

Authentication required, return Multiple menus

## 查看基本信息

```json
GET /api/employees/basic
```

Authentication required, return a employee

## 查看履历信息

    GET /api/employees/resume

Authentication required, return a resume 

## 修改密码

```json
PUT /api/users/

{
  "data":{
     "oldPassword":"",
     "newPassword":""
  }
}
```

Authentication required

Required fields: `oldPassword` `newPassword`

Throws: `密码错误`

## 获取时间

    GET /api/attendance/time

No authentication required, return a Attendance

## 上班打卡

```json
POST /api/attendance

{
  "data":{
     "time":"yyyy-MM-dd HH:mm:ss"
  }
}
```

Authentication required, return a record

Throws: `打卡时间异常`

## 下班打卡

```json
PUT /api/attendance

{
  "data":{
     "time":"yyyy-MM-dd HH:mm:ss"
  }
}
```

Authentication required, return a record

Throws: `打卡时间异常` or `频繁打卡`

## 获取缺勤记录

```json
GET /api/attendance
```

Authentication required, return  records

## 考勤补签

```json
POST /api/attendance

{
  "data":{
    "upTime":"yyyy-MM-dd HH:mm:ss",
    "downTime":"yyyy-MM-dd HH:mm:ss",
    "reason":"",
  }
}
```

Authentication required, return a record

Throws: `打卡时间异常`

## 获取补签申请

    GET /api/attendance/apply

Authentication required, return applys

## 审批补签

```json
POST /api/attendance/apply

{
  "data":{
    "operation":"同意 or 驳回",
    "list":[]
  }
}
```

Authentication required

## 获取假期

```json
GET /api/vacation
```

Authentication required, return number

## 申请休假

```json
POST /api/vacation/apply

{
  "data":{
    "type":"",
    "start":"yyyy-MM-dd",
    "end":"yyyy-MM-dd"
  }
}
```

Authentication required

Throws: `假期不足`

## 审批休假

```json
POST /api/vacation/apply

{
  "data":{
    "operation":"同意 or 驳回",
    "list":[]
  }
}
```

Authentication required

## 月出勤记录

    GET /api/attendance/month

Authentication required, return AbsenceRecords

## 部门信息管理

### 获取所有有效的部门信息(分页)

```json
GET /api/department?limit=&page=?
```

Authentication required, return departments

### 新增部门

```json
POST /api/department
{
  "data":{

  }
}
```

Authentication required, return departments


